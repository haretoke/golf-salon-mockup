<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>システム設定 - Golf Salon Admin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&family=Noto+Serif+JP:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script>
      // Tailwind v4 設定の動的読み込み
      async function loadTailwindConfig() {
        try {
          const response = await fetch("css/tailwind-v4-config.css");
          const cssContent = await response.text();

          // <style type="text/tailwindcss">タグを作成
          const styleElement = document.createElement("style");
          styleElement.type = "text/tailwindcss";
          styleElement.textContent = cssContent;

          // headに挿入
          document.head.appendChild(styleElement);
        } catch (error) {
          console.error("Tailwind設定の読み込みに失敗しました:", error);
        }
      }

      // DOMContentLoadedより前に実行
      loadTailwindConfig();
    </script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  </head>
  <body class="bg-gray-50">
    <div class="flex h-screen relative">
      <!-- サイドバー -->
      <aside
        class="w-60 text-white flex flex-col fixed lg:relative h-full z-40 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 bg-green-gradient"
        id="sidebar"
      >
        <div class="flex-1 flex flex-col">
          <div class="px-6 pt-8 pb-6 border-b border-white/10">
            <div class="flex items-center justify-between">
              <h1 class="text-2xl font-bold">Golf Salon</h1>
              <span
                class="text-xs px-3 py-1 rounded font-semibold text-dark-green bg-gold-gradient"
                >ADMIN</span
              >
            </div>
          </div>

          <nav class="flex-1 py-4">
            <a
              href="admin-users.html"
              class="flex items-center gap-3 px-6 py-3.5 text-white/80 hover:bg-white/10 hover:text-white border-l-4 border-transparent hover:border-yellow-500 transition-all"
            >
              <i data-lucide="users" class="w-5 h-5"></i>
              <span>ユーザー管理</span>
            </a>
            <a
              href="admin-contents.html"
              class="flex items-center gap-3 px-6 py-3.5 text-white/80 hover:bg-white/10 hover:text-white border-l-4 border-transparent hover:border-yellow-500 transition-all"
            >
              <i data-lucide="file-text" class="w-5 h-5"></i>
              <span>コンテンツ管理</span>
            </a>
            <a
              href="admin-emails.html"
              class="flex items-center gap-3 px-6 py-3.5 text-white/80 hover:bg-white/10 hover:text-white border-l-4 border-transparent hover:border-yellow-500 transition-all"
            >
              <i data-lucide="mail" class="w-5 h-5"></i>
              <span>メール管理</span>
            </a>
            <a
              href="admin-settings.html"
              class="flex items-center gap-3 px-6 py-3.5 bg-white/15 border-l-4 border-yellow-500 text-white"
            >
              <i data-lucide="settings" class="w-5 h-5"></i>
              <span>設定</span>
            </a>
          </nav>
        </div>

        <div class="px-6 py-6 border-t border-white/10">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-3">
              <div
                class="w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center"
              >
                <i data-lucide="user" class="w-5 h-5"></i>
              </div>
              <div>
                <div class="text-sm font-medium">管理者</div>
                <div class="text-xs text-gray-400">admin@golfsalon.jp</div>
              </div>
            </div>
            <button
              class="text-white hover:text-gray-300 p-2 rounded-lg hover:bg-white/10"
              title="ログアウト"
            >
              <i data-lucide="log-out" class="w-5 h-5"></i>
            </button>
          </div>
        </div>
      </aside>

      <!-- サイドバーオーバーレイ -->
      <div
        class="fixed inset-0 bg-black/50 z-30 lg:hidden hidden"
        id="sidebarOverlay"
        onclick="toggleSidebar()"
      ></div>

      <!-- メインコンテンツ -->
      <main class="flex-1 overflow-y-auto">
        <!-- ヘッダー -->
        <header class="bg-white shadow-xs border-b">
          <div class="px-4 lg:px-8 py-4 flex items-center justify-between">
            <div class="flex items-center gap-4">
              <button
                class="lg:hidden p-2 hover:bg-gray-100 rounded-lg"
                onclick="toggleSidebar()"
              >
                <i data-lucide="menu" class="w-5 h-5"></i>
              </button>
              <h2 class="text-xl lg:text-2xl font-bold text-dark-green">
                システム設定
              </h2>
            </div>
            <div class="flex items-center gap-4">
              <button
                class="bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2"
                onclick="saveSettings()"
              >
                <i data-lucide="save" class="w-4 h-4"></i>
                <span class="hidden sm:inline">設定保存</span>
              </button>
            </div>
          </div>
        </header>

        <!-- コンテンツ -->
        <div class="p-4 lg:p-8">
          <!-- 設定タブナビゲーション -->
          <div class="mb-8">
            <div class="border-b border-gray-200">
              <nav class="flex space-x-8 overflow-x-auto" aria-label="Tabs">
                <button
                  onclick="showTab('site')"
                  class="settings-tab whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 border-primary-500 text-primary-600"
                  data-tab="site"
                >
                  <i data-lucide="settings" class="w-4 h-4"></i>
                  サイト設定
                </button>
                <button
                  onclick="showTab('maintenance')"
                  class="settings-tab whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"
                  data-tab="maintenance"
                >
                  <i data-lucide="wrench" class="w-4 h-4"></i>
                  メンテナンス
                </button>
              </nav>
            </div>
          </div>

          <!-- サイト設定 -->
          <div id="site-settings" class="settings-panel">
            <div class="space-y-8">
              <!-- サイト基本情報 -->
              <div class="bg-white rounded-lg shadow p-6">
                <h3 class="text-lg font-semibold text-dark-green mb-6">
                  サイト基本情報
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label
                      for="site-name"
                      class="block text-sm font-medium text-gray-700 mb-2"
                      >サイト名</label
                    >
                    <input
                      type="text"
                      id="site-name"
                      value="Golf Salon"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"
                    />
                  </div>
                  <div>
                    <label
                      for="contact-email"
                      class="block text-sm font-medium text-gray-700 mb-2"
                      >お問い合わせメール</label
                    >
                    <input
                      type="email"
                      id="contact-email"
                      value="info@golfsalon.jp"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"
                    />
                  </div>
                  <div class="md:col-span-2">
                    <label
                      for="site-description"
                      class="block text-sm font-medium text-gray-700 mb-2"
                      >サイト説明</label
                    >
                    <textarea
                      id="site-description"
                      rows="3"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"
                    >
ゴルフ上達のための特別な学習空間</textarea
                    >
                  </div>
                  <div>
                    <label
                      for="from-name"
                      class="block text-sm font-medium text-gray-700 mb-2"
                      >メール送信元名</label
                    >
                    <input
                      type="text"
                      id="from-name"
                      value="Golf Salon"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"
                    />
                  </div>
                </div>
              </div>

              <!-- サイト運営設定 -->
              <div class="bg-white rounded-lg shadow p-6">
                <h3 class="text-lg font-semibold text-dark-green mb-6">
                  サイト運営設定
                </h3>
                <div class="space-y-6">
                  <div class="flex items-center justify-between">
                    <div>
                      <h4 class="text-sm font-medium text-gray-900">
                        新規ユーザー登録
                      </h4>
                      <p class="text-sm text-gray-500">
                        新規ユーザーの登録を許可します
                      </p>
                    </div>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                    >
                      <input
                        type="checkbox"
                        id="allow-registration"
                        checked
                        class="sr-only peer"
                      />
                      <div
                        class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"
                      ></div>
                    </label>
                  </div>
                  <div class="flex items-center justify-between">
                    <div>
                      <h4 class="text-sm font-medium text-gray-900">
                        コンテンツ公開
                      </h4>
                      <p class="text-sm text-gray-500">
                        コンテンツの閲覧を許可します
                      </p>
                    </div>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                    >
                      <input
                        type="checkbox"
                        id="allow-content-view"
                        checked
                        class="sr-only peer"
                      />
                      <div
                        class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"
                      ></div>
                    </label>
                  </div>
                </div>
              </div>

              <!-- プラン料金設定 -->
              <div class="bg-white rounded-lg shadow p-6">
                <h3 class="text-lg font-semibold text-dark-green mb-6">
                  プラン料金設定
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                  <div>
                    <label
                      for="standard-price"
                      class="block text-sm font-medium text-gray-700 mb-2"
                      >スタンダードプラン（円/月）</label
                    >
                    <input
                      type="number"
                      id="standard-price"
                      value="2200"
                      min="0"
                      step="100"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"
                    />
                  </div>
                  <div>
                    <label
                      for="gold-price"
                      class="block text-sm font-medium text-gray-700 mb-2"
                      >ゴールドプラン（円/月）</label
                    >
                    <input
                      type="number"
                      id="gold-price"
                      value="6600"
                      min="0"
                      step="100"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"
                    />
                  </div>
                  <div>
                    <label
                      for="platinum-price"
                      class="block text-sm font-medium text-gray-700 mb-2"
                      >プラチナプラン（円/月）</label
                    >
                    <input
                      type="number"
                      id="platinum-price"
                      value="9900"
                      min="0"
                      step="100"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"
                    />
                  </div>
                </div>
                <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                  <div class="flex items-start">
                    <i
                      data-lucide="info"
                      class="w-5 h-5 text-blue-600 mr-2 mt-0.5"
                    ></i>
                    <div>
                      <h4 class="text-sm font-medium text-blue-900 mb-1">
                        料金変更について
                      </h4>
                      <p class="text-sm text-blue-700">
                        料金変更は新規登録ユーザーのみに適用されます。既存ユーザーの請求金額は変更されませんのでご注意ください。
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- メンテナンス設定 -->
          <div id="maintenance-settings" class="settings-panel hidden">
            <div class="space-y-8">
              <!-- メンテナンスモード設定 -->
              <div class="bg-white rounded-lg shadow p-6">
                <h3 class="text-lg font-semibold text-dark-green mb-6">
                  メンテナンスモード
                </h3>
                <div class="space-y-6">
                  <!-- メンテナンスモード切り替え -->
                  <div
                    class="flex items-center justify-between p-4 bg-red-50 rounded-lg border border-red-200"
                  >
                    <div>
                      <h4 class="text-sm font-medium text-red-900">
                        メンテナンスモード
                      </h4>
                      <p class="text-sm text-red-700">
                        有効にするとサイトがメンテナンス画面になります
                      </p>
                    </div>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                    >
                      <input
                        type="checkbox"
                        id="maintenance-enabled"
                        class="sr-only peer"
                        onchange="toggleMaintenanceMode()"
                      />
                      <div
                        class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-red-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"
                      ></div>
                    </label>
                  </div>

                  <!-- メンテナンス予定情報 -->
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label
                        for="maintenance-start-time"
                        class="block text-sm font-medium text-gray-700 mb-2"
                        >予定開始時刻</label
                      >
                      <input
                        type="datetime-local"
                        id="maintenance-start-time"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"
                      />
                    </div>
                    <div>
                      <label
                        for="maintenance-end-time"
                        class="block text-sm font-medium text-gray-700 mb-2"
                        >予定終了時刻</label
                      >
                      <input
                        type="datetime-local"
                        id="maintenance-end-time"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"
                      />
                    </div>
                  </div>

                  <!-- メンテナンスメッセージ -->
                  <div>
                    <label
                      for="maintenance-message"
                      class="block text-sm font-medium text-gray-700 mb-2"
                      >ユーザー向けメッセージ</label
                    >
                    <textarea
                      id="maintenance-message"
                      rows="4"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"
                      placeholder="システムメンテナンスのため、一時的にサービスを停止しております。&#10;ご迷惑をおかけして申し訳ございません。&#10;復旧まで今しばらくお待ちください。"
                    >
システムメンテナンスのため、一時的にサービスを停止しております。
ご迷惑をおかけして申し訳ございません。
復旧まで今しばらくお待ちください。</textarea
                    >
                  </div>

                  <div class="mt-4 p-4 bg-yellow-50 rounded-lg">
                    <div class="flex items-start">
                      <i
                        data-lucide="alert-triangle"
                        class="w-5 h-5 text-yellow-600 mr-2 mt-0.5"
                      ></i>
                      <div>
                        <h4 class="text-sm font-medium text-yellow-900 mb-1">
                          メンテナンスモードについて
                        </h4>
                        <p class="text-sm text-yellow-700">
                          メンテナンスモードを有効にすると、管理者以外のユーザーはサイトにアクセスできなくなります。作業前に必ずユーザーへの事前通知を行ってください。
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script>
      // サイドバートグル機能
      function toggleSidebar() {
        const sidebar = document.getElementById("sidebar");
        const overlay = document.getElementById("sidebarOverlay");

        sidebar.classList.toggle("-translate-x-full");
        overlay.classList.toggle("hidden");
      }

      // 画面サイズ変更時の処理
      window.addEventListener("resize", function () {
        if (window.innerWidth >= 1024) {
          const sidebar = document.getElementById("sidebar");
          const overlay = document.getElementById("sidebarOverlay");

          sidebar.classList.remove("-translate-x-full");
          overlay.classList.add("hidden");
        }
      });

      // 設定保存
      function saveSettings() {
        if (confirm("設定を保存しますか？")) {
          alert("設定を保存しました");
        }
      }

      // タブ切り替え
      function showTab(tabName) {
        // すべてのタブを非アクティブにする
        document.querySelectorAll(".settings-tab").forEach((tab) => {
          tab.classList.remove("border-primary-500", "text-primary-600");
          tab.classList.add(
            "border-transparent",
            "text-gray-500",
            "hover:text-gray-700",
            "hover:border-gray-300"
          );
        });

        // すべてのパネルを非表示にする
        document.querySelectorAll(".settings-panel").forEach((panel) => {
          panel.classList.add("hidden");
        });

        // クリックされたタブをアクティブにする
        const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
        activeTab.classList.remove(
          "border-transparent",
          "text-gray-500",
          "hover:text-gray-700",
          "hover:border-gray-300"
        );
        activeTab.classList.add("border-primary-500", "text-primary-600");

        // 対応するパネルを表示する
        document
          .getElementById(tabName + "-settings")
          .classList.remove("hidden");
      }

      // メンテナンスモード切り替え
      function toggleMaintenanceMode() {
        const isEnabled = document.getElementById(
          "maintenance-enabled"
        ).checked;
        const maintenanceSettings = document.querySelectorAll(
          "#maintenance-settings input:not(#maintenance-enabled), #maintenance-settings textarea"
        );

        maintenanceSettings.forEach((element) => {
          element.disabled = !isEnabled;
          if (!isEnabled) {
            element.classList.add("bg-gray-100");
          } else {
            element.classList.remove("bg-gray-100");
          }
        });
      }

      // 初期化時にデフォルトタブを表示
      document.addEventListener("DOMContentLoaded", function () {
        showTab("site");
      });

      lucide.createIcons();
    </script>
  </body>
</html>
