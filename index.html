<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Golf Salon - モックアップ一覧</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&family=Noto+Serif+JP:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/styles.css" />
    <style>
      body {
        background-color: var(--gray-light);
        padding: 2rem;
      }
      .mockup-container {
        max-width: 900px;
        margin: 0 auto;
        background-color: var(--white);
        border-radius: var(--radius-lg);
        padding: 3rem;
        box-shadow: var(--shadow-lg);
      }
      .mockup-header {
        text-align: center;
        margin-bottom: 3rem;
      }
      .mockup-header h1 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
      }
      .mockup-header p {
        font-size: 1.2rem;
        margin-bottom: 0;
      }
      .mockup-list {
        display: grid;
        gap: 1.5rem;
      }
      
      .mockup-item-wrapper {
        background-color: var(--white);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-sm);
        overflow: hidden;
        transition: all 0.3s ease;
      }
      
      .mockup-item-wrapper:hover {
        box-shadow: var(--shadow-md);
      }
      .mockup-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 2rem;
        background-color: var(--gray-light);
        border-radius: 0;
        transition: all 0.3s ease;
        border: none;
        text-decoration: none;
        color: inherit;
      }
      .mockup-item:hover {
        background-color: var(--gray-medium);
        transform: translateY(-2px);
        text-decoration: none;
        color: inherit;
      }
      .mockup-item h3 {
        font-size: 1.3rem;
        margin-bottom: 0.5rem;
        color: var(--dark-green);
      }
      .mockup-item p {
        margin-bottom: 0;
        color: var(--gray-dark);
        font-size: 1rem;
      }
      
      /* 変更履歴スタイル */
      .change-history {
        padding: 1.5rem;
        background-color: rgba(212, 175, 55, 0.1);
        border-radius: var(--radius-sm);
        font-size: 0.85rem;
        position: relative;
      }
      
      .change-history-header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: var(--dark-green);
      }
      
      .change-history-icon {
        width: 14px;
        height: 14px;
        opacity: 0.8;
      }
      
      .change-history-latest {
        color: var(--gray-dark);
        line-height: 1.3;
        border-top: 1px solid rgba(212, 175, 55, 0.3);
        padding-top: 0.75rem;
        margin-top: 0.5rem;
      }
      
      .change-history-latest:first-of-type {
        border-top: none;
        padding-top: 0;
        margin-top: 0;
      }
      
      .change-history-toggle {
        background: none;
        border: none;
        color: var(--primary-green);
        cursor: pointer;
        font-size: 0.8rem;
        padding: 0.25rem 0;
        text-decoration: underline;
        margin-top: 0.25rem;
      }
      
      .change-history-toggle:hover {
        color: var(--dark-green);
      }
      
      .change-history-list {
        display: none;
        margin-top: 0.5rem;
        padding-top: 0.5rem;
        border-top: 1px solid rgba(212, 175, 55, 0.3);
      }
      
      .change-history-list.show {
        display: block;
      }
      
      .change-history-item {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        padding: 0.25rem 0;
        color: var(--gray-dark);
        line-height: 1.3;
      }
      
      .change-history-item + .change-history-item {
        border-top: 1px solid rgba(212, 175, 55, 0.2);
        margin-top: 0.25rem;
        padding-top: 0.5rem;
      }
      
      .change-history-date {
        font-size: 0.75rem;
        color: var(--gray-dark);
        opacity: 0.8;
        white-space: nowrap;
        margin-left: 0.5rem;
      }
      @media (max-width: 1024px) {
        .mockup-container {
          max-width: 95%;
          padding: 2.5rem;
          margin: 1rem auto;
        }
      }
      @media (max-width: 768px) {
        body {
          padding: 1rem;
        }
        .mockup-container {
          padding: 2rem;
          margin: 0 auto;
          border-radius: var(--radius-md);
        }
        .mockup-header {
          margin-bottom: 2rem;
        }
        .mockup-header h1 {
          font-size: 2rem;
        }
        .mockup-header p {
          font-size: 1rem;
        }
        .mockup-list {
          gap: 1rem;
        }
        .mockup-item {
          flex-direction: column;
          text-align: center;
          gap: 1rem;
          padding: 1.5rem;
        }
        .mockup-item h3 {
          margin-bottom: 0.5rem;
          font-size: 1.2rem;
        }
        .mockup-item p {
          margin-bottom: 0;
          font-size: 0.9rem;
        }
        
        .change-history {
          padding: 1rem;
          font-size: 0.8rem;
        }
        
        .change-history-header {
          margin-bottom: 0.25rem;
        }
        
        .change-history-latest {
          padding-top: 0.5rem;
          margin-top: 0.375rem;
        }
        
        .change-history-latest:first-of-type {
          padding-top: 0;
          margin-top: 0;
        }
        
        .change-history-toggle {
          font-size: 0.75rem;
        }
        
        .change-history-date {
          font-size: 0.7rem;
        }
      }
      @media (max-width: 480px) {
        body {
          padding: 0.5rem;
        }
        .mockup-container {
          padding: 1.5rem;
        }
        .mockup-header h1 {
          font-size: 1.8rem;
        }
        .mockup-item {
          padding: 1.25rem;
        }
        .mockup-item h3 {
          font-size: 1.1rem;
        }
        .mockup-item p {
          font-size: 0.85rem;
        }
        
        .change-history {
          padding: 0.75rem;
          font-size: 0.75rem;
        }
        
        .change-history-header {
          margin-bottom: 0.25rem;
        }
        
        .change-history-latest {
          padding-top: 0.375rem;
          margin-top: 0.25rem;
        }
        
        .change-history-latest:first-of-type {
          padding-top: 0;
          margin-top: 0;
        }
        
        .change-history-toggle {
          font-size: 0.7rem;
        }
        
        .change-history-date {
          font-size: 0.65rem;
        }
      }
      .mockup-status {
        font-size: 0.875rem;
        padding: 4px 12px;
        border-radius: var(--radius-sm);
        font-weight: 600;
      }
      .status-complete {
        background-color: var(--primary-green);
        color: var(--white);
      }
      .status-pending {
        background-color: var(--gray-medium);
        color: var(--gray-dark);
      }
    </style>
  </head>
  <body>
    <div class="mockup-container">
      <div class="mockup-header">
        <h1>Golf Salon モックアップ</h1>
      </div>

      <div class="mockup-list">
        <div class="mockup-item-wrapper" data-id="login">
          <a href="login.html" class="mockup-item">
            <div>
              <h3>ログイン画面</h3>
              <p>ユーザー認証とアカウント作成</p>
            </div>
            <span class="mockup-status status-pending">確認中</span>
          </a>
          <div class="change-history"></div>
        </div>

        <div class="mockup-item-wrapper" data-id="dashboard">
          <a href="dashboard.html" class="mockup-item">
            <div>
              <h3>ダッシュボード</h3>
              <p>コンテンツ閲覧</p>
            </div>
            <span class="mockup-status status-pending">確認中</span>
          </a>
          <div class="change-history"></div>
        </div>

        <div class="mockup-item-wrapper" data-id="signup">
          <a href="signup.html" class="mockup-item">
            <div>
              <h3>会員登録</h3>
              <p>シンプルな登録フローとプラン選択</p>
            </div>
            <span class="mockup-status status-pending">確認中</span>
          </a>
          <div class="change-history"></div>
        </div>

        <div class="mockup-item-wrapper" data-id="mypage">
          <a href="mypage.html" class="mockup-item">
            <div>
              <h3>マイページ</h3>
              <p>設定変更と退会機能</p>
            </div>
            <span class="mockup-status status-pending">確認中</span>
          </a>
          <div class="change-history"></div>
        </div>

        <div class="mockup-item-wrapper" data-id="billing">
          <a href="billing.html" class="mockup-item">
            <div>
              <h3>課金画面</h3>
              <p>プラン変更と決済管理</p>
            </div>
            <span class="mockup-status status-pending">確認中</span>
          </a>
          <div class="change-history"></div>
        </div>

        <div class="mockup-item-wrapper" data-id="admin">
          <a href="admin.html" class="mockup-item">
            <div>
              <h3>管理者画面（コンテンツ管理）</h3>
              <p>投稿管理のみ実装済み</p>
            </div>
            <span class="mockup-status status-pending">部分実装</span>
          </a>
          <div class="change-history"></div>
        </div>

        <div class="mockup-item-wrapper" data-id="legal">
          <a href="legal.html" class="mockup-item">
            <div>
              <h3>法的事項</h3>
              <p>特商法・プライバシーポリシー・利用規約</p>
            </div>
            <span class="mockup-status status-pending">確認中</span>
          </a>
          <div class="change-history"></div>
        </div>
        
        <div class="mockup-item-wrapper" data-id="common">
          <div class="mockup-item">
            <div>
              <h3>共通項目</h3>
              <p>全ページに適用される変更</p>
            </div>
            <span class="mockup-status status-pending">対応中</span>
          </div>
          <div class="change-history"></div>
        </div>
      </div>
    </div>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <script>
      // 変更履歴の管理
      class ChangeHistoryManager {
        constructor() {
          this.historyData = {};
          this.init();
        }
        
        async init() {
          await this.loadHistoryData();
          this.renderAllHistories();
        }
        
        async loadHistoryData() {
          try {
            const response = await fetch('./data/changeHistory.json');
            this.historyData = await response.json();
          } catch (error) {
            console.error('変更履歴データの読み込みに失敗しました:', error);
            this.historyData = {};
          }
        }
        
        renderAllHistories() {
          const wrappers = document.querySelectorAll('.mockup-item-wrapper');
          wrappers.forEach(wrapper => {
            const id = wrapper.getAttribute('data-id');
            const historyContainer = wrapper.querySelector('.change-history');
            this.renderHistory(id, historyContainer);
          });
          
          // Lucideアイコンを初期化
          lucide.createIcons();
        }
        
        renderHistory(id, container) {
          const history = this.historyData[id] || [];
          
          if (history.length === 0) {
            container.style.display = 'none';
            return;
          }
          
          // 最初の3件を表示
          const displayCount = Math.min(3, history.length);
          const displayItems = history.slice(0, displayCount);
          
          // 最新の変更内容を表示
          const headerHtml = `
            <div class="change-history-header">
              <i data-lucide="clock" class="change-history-icon"></i>
              <span>変更履歴</span>
            </div>
          `;
          
          // 最初の3件を表示
          const latestItemsHtml = displayItems.map(item => `
            <div class="change-history-latest">
              ${item.content}
              <span class="change-history-date">${this.formatDate(item.date)}</span>
            </div>
          `).join('');
          
          let toggleHtml = '';
          let listHtml = '';
          
          // 3件より多い履歴がある場合はアコーディオンを表示
          if (history.length > 3) {
            toggleHtml = `
              <button class="change-history-toggle" onclick="changeHistory.toggleHistory('${id}')">
                ${history.length - 3}件の過去の変更を表示
              </button>
            `;
            
            const historyItems = history.slice(3).map(item => `
              <div class="change-history-item">
                <span>${item.content}</span>
                <span class="change-history-date">${this.formatDate(item.date)}</span>
              </div>
            `).join('');
            
            listHtml = `
              <div class="change-history-list" id="history-list-${id}">
                ${historyItems}
              </div>
            `;
          }
          
          container.innerHTML = headerHtml + latestItemsHtml + toggleHtml + listHtml;
        }
        
        toggleHistory(id) {
          const listElement = document.getElementById(`history-list-${id}`);
          const toggleButton = document.querySelector(`[onclick="changeHistory.toggleHistory('${id}')"]`);
          
          if (listElement) {
            const isVisible = listElement.classList.contains('show');
            
            if (isVisible) {
              listElement.classList.remove('show');
              const historyCount = this.historyData[id].length - 3;
              toggleButton.textContent = `${historyCount}件の過去の変更を表示`;
            } else {
              listElement.classList.add('show');
              toggleButton.textContent = '過去の変更を隠す';
            }
          }
        }
        
        formatDate(dateString) {
          const date = new Date(dateString);
          return `${date.getMonth() + 1}/${date.getDate()}`;
        }
      }
      
      // 初期化
      const changeHistory = new ChangeHistoryManager();
    </script>
  </body>
</html>
